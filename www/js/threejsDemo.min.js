"use strict";Bridge.define("Particles.Constrained",{p1:null,p2:null,restLength:0,constructor:function(n,t){this.p1=n;this.p2=t;this.restLength=this.p1.position.distanceTo(this.p2.position)},setPosition:function(){var r=this.p2.position.clone().sub(this.p1.position),n=null,t=r.length(),e=0,i,u,f;t!==0&&((i=t-this.restLength,i<0)||(e=this.restLength/t,u=r.normalize().multiplyScalar(i),f=this.p1.isFixed||this.p2.isFixed?1:.5,n=u.multiplyScalar(f),this.p1.isFixed||this.p1.position.add(n),this.p2.isFixed||this.p2.position.sub(n)))},satisify:function(){var n=Particles.DivVector.sub(this.p2.position,this.p1.position),t=n.length();t!==0&&this.setPosition()}});Bridge.define("Particles.ConstrainedList",{config:{init:function(){this.items=Bridge.Array.init(0,null)}},append:function(n){this.items.push(n)},applyConstrained:function(n){for(var i,t=Bridge.getEnumerator(this.items);t.moveNext();)i=t.getCurrent(),i.applyConstrained(n)},updateMesh:function(){for(var t,n=Bridge.getEnumerator(this.items);n.moveNext();)t=n.getCurrent(),t.updateMesh()}});Bridge.define("Particles.DivVector",{statics:{config:{init:function(){this.diff=new THREE.Vector3}},sub:function(n,t){return Particles.DivVector.diff.subVectors(n,t),Particles.DivVector.diff}}});Bridge.define("Particles.GlobalForce",{apply:!0,getForce:function(){throw new Bridge.NotImplementedException;}});Bridge.define("Particles.YGravity",{inherits:[Particles.GlobalForce],value:800,gravity:null,constructor:function(n){Particles.GlobalForce.prototype.$constructor.call(this);this.setValue(n)},setValue:function(n){this.value=n;this.gravity=new THREE.Vector3(0,-this.value,0)},getForce:function(){return this.gravity}});Bridge.define("Particles.RandomWindForce",{inherits:[Particles.GlobalForce],windStrength:0,config:{init:function(){this.windForce=new THREE.Vector3}},getForce:function(){var n=(new Date).getTime()*1e4;this.windStrength=Math.cos(n/7e3)*200+30;var t=Math.sin(Bridge.Int.div(n,2e3)),i=Math.sin(Bridge.Int.div(n,1e3));return this.windForce.set(t,0,i).normalize().multiplyScalar(this.windStrength),this.windForce}});Bridge.define("Particles.ObjectConstrain",{apply:!0,mesh:null,applyConstrained:function(n){var t;if(this.apply)for(t=Bridge.getEnumerator(n);t.moveNext();){var i=t.getCurrent(),u=i.position,r=this.constrain(u);r!==null&&i.position.add(r)}}});Bridge.define("Particles.BoxConstrain",{inherits:[Particles.ObjectConstrain],statics:{config:{init:function(){this.dirs=Bridge.merge(new Bridge.List$1(THREE.Vector3)(),[[new THREE.Vector3(1,0,0)],[new THREE.Vector3(-1,0,0)],[new THREE.Vector3(0,1,0)],[new THREE.Vector3(0,-1,0)],[new THREE.Vector3(0,0,1)],[new THREE.Vector3(0,0,-1)]])}},isZ:function(n){return n>=4&&n<6},isY:function(n){return n>=2&&n<4},isX:function(n){return n>=0&&n<2}},box:null,width:60,height:60,depth:60,config:{init:function(){this.center=new THREE.Vector3}},constructor:function(n,t,i,r){Particles.ObjectConstrain.prototype.$constructor.call(this);this.center=n;this.width=t;this.height=i;this.depth=r;this.makeBox();this.makeMesh()},constrain:function(n){var i;if(this.box.containsPoint(n)){var r=Number.MAX_VALUE,t=0,u=0;for(i=0;i<6;i++)Particles.BoxConstrain.isX(i)?(t=this.distance(n.x,i),Math.abs(t)<Math.abs(r)&&t<0&&(r=t,u=i)):Particles.BoxConstrain.isY(i)?(t=-this.distance(n.y,i),Math.abs(t)<Math.abs(r)&&t<0&&(r=t,u=i)):Particles.BoxConstrain.isZ(i)&&(t=this.distance(n.z,i),Math.abs(t)<Math.abs(r)&&t<0&&(r=t,u=i));return Particles.BoxConstrain.dirs.getItem(u).clone().multiplyScalar(r*1.3)}return null},distance:function(n,t){return t===0?this.left()-n:t===1?n-this.right():t===2?this.bottom()-n:t===3?this.top()-n:t===4?this.front()-n:t===5?n-this.back():-1},left:function(){return this.center.x-this.width*.5},right:function(){return this.center.x+this.width*.5},bottom:function(){return this.center.y-this.height*.5},top:function(){return this.center.y+this.height*.5},front:function(){return this.center.z-this.depth*.5},back:function(){return this.center.z+this.depth*.5},makeBox:function(){var n=this.center.x-this.width*.5,t=this.center.y-this.height*.5,i=this.center.z-this.depth*.5,u=new THREE.Vector3(n,t,i),r;n=this.center.x+this.width*.5;t=this.center.y+this.height*.5;i=this.center.z+this.depth*.5;r=new THREE.Vector3(n,t,i);this.box=new THREE.Box3(u,r)},makeMesh:function(){var t=new THREE.BoxGeometry(this.width-25,this.height-25,this.depth-25),n=new THREE.MeshPhongMaterial;n.color=(new THREE.Color).setHex(11184810);n.transparent=!1;n.opacity=.5;this.mesh=new THREE.Mesh(t,n);this.mesh.castShadow=!0;this.mesh.receiveShadow=!0;this.mesh.visible=this.apply;this.mesh.position.copy(this.center)},updateMesh:function(){this.mesh.visible=this.apply;this.mesh.position.copy(this.center);this.makeBox()}});Bridge.define("Particles.BallConstrain",{inherits:[Particles.ObjectConstrain],center:null,radius:0,constructor:function(n,t){Particles.ObjectConstrain.prototype.$constructor.call(this);this.center=n;this.radius=t;this.makeMesh()},makeMesh:function(){var t=new THREE.SphereGeometry(this.radius-10,20,20),n=new THREE.MeshPhongMaterial;n.color=(new THREE.Color).setHex(11184810);this.mesh=new THREE.Mesh(t,n);this.mesh.castShadow=!0;this.mesh.receiveShadow=!0;this.mesh.visible=this.apply},constrain:function(n){var t=Particles.DivVector.sub(n,this.center).clone(),i;return t.length()<this.radius?(i=this.radius-t.length(),t.normalize().multiplyScalar(i),t):null},changeRadius:function(n){this.radius=n;this.mesh.geometry=new THREE.SphereGeometry(this.radius-10,20,20);this.mesh.geometry.computeFaceNormals();this.mesh.geometry.computeVertexNormals();this.mesh.geometry.normalsNeedUpdate=!0;this.mesh.geometry.verticesNeedUpdate=!0;this.mesh.updateMatrix()},updateMesh:function(){this.mesh.position.copy(this.center);this.mesh.visible=this.apply}});Bridge.define("Particles.Particle",{position:null,previous:null,original:null,acc:null,mass:0,invMass:0,isFixed:!1,constructor:function(n,t){this.position=t.clone();this.previous=t.clone();this.original=t.clone();this.acc=new THREE.Vector3(0,0,0);this.mass=n;this.invMass=1/this.mass},integrate:function(n){if(this.isFixed){this.toOriginal();return}this.acc.multiplyScalar(Particles.ParticleConstants.dAMPING);var t=this.position.clone().sub(this.previous);t.add(this.acc.multiplyScalar(n*n));t.add(this.position);this.previous=this.position.clone();this.position=t;this.acc.set(0,0,0)},addForce:function(n){var t=n.clone();t.multiplyScalar(this.invMass);this.acc.add(t)},toOriginal:function(){this.position.copy(this.original);this.previous.copy(this.original);this.acc.set(0,0,0)}});Bridge.define("Particles.ParticleConstants",{statics:{sPEEDFACTOR:1e3,dAMPING:.3,mASS:.1,config:{init:function(){this.tIMESTEP=Particles.ParticleConstants.sPEEDFACTOR/60;this.tIMESQR=Particles.ParticleConstants.tIMESTEP*Particles.ParticleConstants.tIMESTEP}}}});Bridge.define("Particles.ParticleSystem",{particles:null,constrains:null,globalForces:null,objectconstraines:null});Bridge.define("Particles.ParametricSurface",{inherits:[Particles.ParticleSystem],geometry:null,nrU:50,nrV:50,constructor:function(){Particles.ParticleSystem.prototype.$constructor.call(this);this.objectconstraines=new Particles.ConstrainedList;this.globalForces=Bridge.Array.init(0,null)},simulate:function(){var n,t,i,r,u,f,e,o;if(this.geometry!==null){for(n=Bridge.getEnumerator(this.globalForces);n.moveNext();)if(u=n.getCurrent(),u.apply)for(t=Bridge.getEnumerator(this.particles);t.moveNext();)f=t.getCurrent(),f.addForce(u.getForce());for(this.objectconstraines.applyConstrained(this.particles),i=Bridge.getEnumerator(this.particles);i.moveNext();)e=i.getCurrent(),e.integrate(Particles.ParticleConstants.tIMESTEP);for(r=Bridge.getEnumerator(this.constrains);r.moveNext();)o=r.getCurrent(),o.satisify();this.updateGeometry()}},index:function(n,t){return n+t*(this.nrU+1)},makeConstrains:function(){var n,t;for(this.constrains=Bridge.Array.init(0,null),t=0;t<this.nrV;t++)for(n=0;n<this.nrU;n++)this.constrains.push(new Particles.Constrained(this.particles[this.index(n,t)],this.particles[this.index(n,t+1)])),this.constrains.push(new Particles.Constrained(this.particles[this.index(n,t)],this.particles[this.index(n+1,t)]));for(t=0;t<this.nrV;t++)n=this.nrU,this.constrains.push(new Particles.Constrained(this.particles[this.index(n,t)],this.particles[this.index(n,t+1)]));for(n=0;n<this.nrU;n++)t=this.nrV,this.constrains.push(new Particles.Constrained(this.particles[this.index(n,t)],this.particles[this.index(n+1,t)]))},createParticles:function(){var n,t;for(console.log("CreateParticles"),this.particles=Bridge.Array.init(0,null),t=0;t<=this.nrV;t++)for(n=0;n<=this.nrU;n++){var i=n/Bridge.cast(this.nrU,Number),r=t/Bridge.cast(this.nrV,Number),u=this.paramFunction(i,r),f=Particles.ParticleConstants.mASS;this.particles.push(new Particles.Particle(f,u))}},setFixed:function(n){for(var i,t=Bridge.getEnumerator(n);t.moveNext();)i=t.getCurrent(),this.particles[i].isFixed=!0},updateGeometry:function(){var t,i,n;if(this.geometry!==null){if(t=this.particles,i=t.length,this.geometry.vertices!==null)for(n=0;n<i;n++)this.geometry.vertices[n].copy(t[n].position);this.geometry.computeFaceNormals();this.geometry.computeVertexNormals();this.geometry.normalsNeedUpdate=!0;this.geometry.verticesNeedUpdate=!0}},reset:function(){for(var t,n=Bridge.getEnumerator(this.particles);n.moveNext();)t=n.getCurrent(),t.toOriginal()},fixRange:function(n,t){for(var i=n;i<=t;i++)this.particles[i].isFixed=!0}});Bridge.define("Particles.Cloth",{inherits:[Particles.ParametricSurface],statics:{uSegs:25,vSegs:25,create:function(){return new Particles.Cloth(Particles.Cloth.uSegs,Particles.Cloth.vSegs)}},windForce:null,gravityForce:null,ballConstrain:null,boxConstrain:null,width:250,height:250,constructor:function(n,t){Particles.ParametricSurface.prototype.$constructor.call(this);this.nrU=n;this.nrV=t;this.ballConstrain=new Particles.BallConstrain(new THREE.Vector3(0,-30,0),55);this.ballConstrain.apply=!1;this.objectconstraines.append(this.ballConstrain);this.boxConstrain=new Particles.BoxConstrain(new THREE.Vector3(0,-90,0),100,100,100);this.boxConstrain.apply=!0;this.objectconstraines.append(this.boxConstrain);this.windForce=new Particles.RandomWindForce;this.windForce.apply=!1;this.gravityForce=new Particles.YGravity(Particles.ParticleConstants.sPEEDFACTOR*4e-5/Particles.ParticleConstants.tIMESQR);this.globalForces.push(this.windForce);this.globalForces.push(this.gravityForce);this.createParticles();this.makeConstrains();this.fixRange(0,this.nrU);this.geometry=new THREE.ParametricGeometry(Bridge.fn.bind(this,this.paramFunction),this.nrU,this.nrV);this.geometry.dynamic=!0},paramFunction:function(n,t){var i=(n-.5)*this.width,r=(t+.5)*this.height;return new THREE.Vector3(i,r,0)},simulate:function(n){Particles.ParametricSurface.prototype.simulate.call(this,n);this.ballConstrain.center.z=-Math.sin((new Date).getTime()/600)*110;this.ballConstrain.center.x=Math.cos((new Date).getTime()/400)*110;this.ballConstrain.updateMesh();this.boxConstrain.center.z=-Math.cos((new Date).getTime()/600)*110;this.boxConstrain.center.x=Math.sin((new Date).getTime()/400)*110;this.boxConstrain.updateMesh()}});Bridge.define("Particles.Carpet",{inherits:[Particles.ParametricSurface],windForce:null,gravityForce:null,ballConstrain:null,boxConstrain:null,config:{init:function(){this.uMin=-2*Math.PI;this.uMax=2*Math.PI;this.vMin=-2*Math.PI;this.vMax=2*Math.PI}},constructor:function(){Particles.ParametricSurface.prototype.$constructor.call(this);this.nrU=30;this.nrV=30;this.ballConstrain=new Particles.BallConstrain(new THREE.Vector3(-220,-350,0),350);this.ballConstrain.apply=!0;this.objectconstraines.append(this.ballConstrain);this.boxConstrain=new Particles.BoxConstrain(new THREE.Vector3(180,-20,0),250,250,250);this.boxConstrain.apply=!0;this.objectconstraines.append(this.boxConstrain);this.windForce=new Particles.RandomWindForce;this.windForce.apply=!1;this.globalForces.push(this.windForce);this.gravityForce=new Particles.YGravity(Particles.ParticleConstants.sPEEDFACTOR*4e-5/Particles.ParticleConstants.tIMESQR);this.globalForces.push(this.gravityForce);this.createParticles();this.makeConstrains();this.geometry=new THREE.ParametricGeometry(Bridge.fn.bind(this,this.paramFunction),this.nrU,this.nrV);this.geometry.dynamic=!0},simulate:function(n){if(this.geometry!==null&&(Particles.ParametricSurface.prototype.simulate.call(this,n),this.ballConstrain.center.z=-Math.sin((new Date).getTime()/900)*200,this.ballConstrain.center.x=Math.cos((new Date).getTime()/900)*300,this.ballConstrain.updateMesh(),this.particles[0].position.y<-800)){this.reset();var t=.7,i=t+Math.random()*(1.3-t);this.ballConstrain.changeRadius(this.ballConstrain.radius*i);this.ballConstrain.updateMesh()}},paramFunction:function(n,t){n=this.uMin+n*(this.uMax-this.uMin);t=this.vMin+t*(this.vMax-this.vMin);var i=n*50,r=t*50,u=20*Math.sin(n)*Math.cos(t)+300;return new THREE.Vector3(i,u,r)}});Bridge.define("ThreejsDemo.PanelType",{statics:{panel_default:0,panel_primary:1,panel_success:2,panel_info:3,panel_warning:4,panel_danger:5},"enum":!0});Bridge.define("ThreejsDemo.BussyDlg",{statics:{make:function(){return $('\r\n\t\t            <div class="modal fade" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog" aria-hidden="true" style="padding-top:15%; overflow-y:visible;"> \r\n\t\t                <div class="modal-dialog modal-m"> \r\n\t\t                    <div class="modal-content"> \r\n\t\t\t                    <div class="modal-header"><h4 style="margin:0;"><\/h4><\/div> \r\n\t\t\t                        <div class="modal-body"> \r\n\t\t\t                        <div class="progress progress-striped active" style="margin-bottom:0;"><div class="progress-bar" style="width: 100%">\r\n                                    <\/div>\r\n                                    <\/div> \r\n\t\t                        <\/div> \r\n\t\t                    <\/div>\r\n                        <\/div>\r\n                    <\/div>')}},bussy:null,dialogSize:"sm",progressType:"default",constructor:function(){this.bussy=ThreejsDemo.BussyDlg.make().appendTo(document.body)},show:function(n){this.bussy.find("h4").html(n);this.bussy.find(".modal-dialog").attr("class","modal-dialog").addClass("modal-"+this.dialogSize);this.bussy.find(".progress-bar").addClass("progress-bar-"+this.progressType);window.setTimeout(Bridge.fn.bind(this,this.doShow))},doShow:function(){this.bussy.modal("show")},doHide:function(){this.bussy.modal("hide")},hide:function(n){n===void 0&&(n=0);window.setTimeout(Bridge.fn.bind(this,this.doHide),n)}});Bridge.define("ThreejsDemo.ListMaker",{list:null,constructor:function(){this.list=this.makeList()},addListItem:function(n,t,i){var r=$("<li>").addClass("list-group-item").html(n);return r.click(i,t),this.list.append(r),r},makeList:function(){return $("<ul>").addClass("list-group")}});Bridge.define("ThreejsDemo.GeometryFunction",{$function:null,name:null});Bridge.define("ThreejsDemo.ModalDlg",{statics:{modalDialog:null,show:function(n,t){var i=document.createElement("p");i.innerHTML=t;ThreejsDemo.ModalDlg.showDlgWithContent(n,i)},showDlgWithContent:function(n,t){ThreejsDemo.ModalDlg.ensureDialog(n);ThreejsDemo.ModalDlg.modalDialog.bodyContent!==null&&(ThreejsDemo.ModalDlg.modalDialog.bodyContent.remove(),ThreejsDemo.ModalDlg.modalDialog.bodyContent=null);ThreejsDemo.ModalDlg.modalDialog.bodyContent=t;ThreejsDemo.ModalDlg.modalDialog.title.innerHTML=n;ThreejsDemo.ModalDlg.modalDialog.body.appendChild(t);ThreejsDemo.ModalDlg.modalDialog.show()},ensureDialog:function(n){ThreejsDemo.ModalDlg.modalDialog===null&&(ThreejsDemo.ModalDlg.modalDialog=ThreejsDemo.ModalDlg.make(n,"content","myModal"))},onHidden:function(){ThreejsDemo.ModalDlg.modalDialog!==null&&(ThreejsDemo.ModalDlg.modalDialog.remove(),ThreejsDemo.ModalDlg.modalDialog=null)},make:function(n,t,i){var u=document.createElement("div"),y,a,f,s,e,h,c,v,l,o,r;return u.className="modal fade",u.id=i,u.setAttribute("role","dialog"),y=$(u).on("hidden.bs.modal",ThreejsDemo.ModalDlg.onHidden),a=document.createElement("div"),a.className="modal-dialog-sm",u.appendChild(a),f=document.createElement("div"),f.className="modal-content",a.appendChild(f),s=document.createElement("div"),s.className="modal-header",f.appendChild(s),e=document.createElement("button"),e.setAttribute("type","button"),e.className="close",e.setAttribute("data-dismiss","modal"),e.innerHTML="&times;",s.appendChild(e),h=document.createElement("h4"),h.className="modal-title",h.innerHTML=n,s.appendChild(h),c=document.createElement("div"),c.className="modal-body",f.appendChild(c),v=document.createElement("p"),v.innerHTML=t,c.appendChild(v),l=document.createElement("div"),l.className="modal-footer",o=document.createElement("button"),o.setAttribute("type","button"),o.className="btn btn-default",o.setAttribute("data-dismiss","modal"),o.innerHTML="Close",l.appendChild(o),f.appendChild(l),document.body.appendChild(u),r=new ThreejsDemo.ModalDlg,r.topElement=u,r.body=c,r.title=h,r.bodyContent=v,r.footer=l,r.id=i,r}},id:"myModal",title:null,bodyContent:null,footer:null,body:null,topElement:null,show:function(){var n=$("#"+this.id).modal("show")},hide:function(){var n=$("#"+this.id).modal("hide")},remove:function(){document.body.removeChild(this.topElement)}});Bridge.define("ThreejsDemo.Shaders",{statics:{fragment:"\r\n\r\n           uniform sampler2D texture;\r\n\t\t\tvarying vec2 vUV;\r\n\r\n\t\t\tvec4 pack_depth( const in float depth ) {\r\n\r\n\t\t\t\tconst vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\r\n\t\t\t\tconst vec4 bit_mask  = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\r\n\t\t\t\tvec4 res = fract( depth * bit_shift );\r\n\t\t\t\tres -= res.xxyz * bit_mask;\r\n\t\t\t\treturn res;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvoid main() {\r\n\r\n\t\t\t\tvec4 pixel = texture2D( texture, vUV );\r\n\r\n\t\t\t\tif ( pixel.a < 0.5 ) discard;\r\n\r\n\t\t\t\tgl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );\r\n\r\n\t\t\t}",vertex:"\r\n\r\n            varying vec2 vUV;\r\n\r\n\t\t\tvoid main() {\r\n\r\n\t\t\t\tvUV = 0.75 * uv;\r\n\r\n\t\t\t\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\r\n\r\n\t\t\t\tgl_Position = projectionMatrix * mvPosition;\r\n\r\n\t\t\t}"}});Bridge.define("ThreejsDemo.AccordionPanel",{statics:{make:function(n,t,i,r){var u=new ThreejsDemo.AccordionPanel,f;return u.id=i,u.pType=r,f=$("<div>"),Bridge.String.isNullOrEmpty(n)||f.append($("<h2>").html(n)),Bridge.String.isNullOrEmpty(t)||f.append($("<h4>").html(t)),u.panelGroup=$("<div>").addClass("panel-group").attr("id",i),f.append(u.panelGroup),u.mainContainer=f,u},getPanelTypeName:function(n){return Bridge.String.format("panel {0}",Bridge.String.replaceAll(n.toString(),"_","-"))}},pType:0,id:null,panelGroup:null,mainContainer:null,panelCount:0,addPanel:function(n,t,i,r){i===void 0&&(i=null);r===void 0&&(r=null);this.panelCount++;var f=ThreejsDemo.AccordionPanel.getPanelTypeName(this.pType),u=$("<div>").addClass(f);return u.append(this.makePanelTitle(n,"#panel_"+this.id+this.panelCount.toString(),"#"+this.id,i,r)),u.append(this.makeContentPanel(t,"panel_"+this.id+this.panelCount.toString())),this.panelGroup.append(u),u},makePanelTitle:function(n,t,i,r,u){var f=$("<div>").addClass("panel-heading"),e=$("<h4>").addClass("panel-title"),o=$("<a>").attr("data-toggle","collapse").attr("data-parent",i).attr("href",t).html(n);return r!==null&&o.click(u,r),e.append(o),f.append(e),f},collapse:function(){window.alert("On Collapse")},makeContentPanel:function(n,t){var r=$("<div>").addClass("panel-collapse collapse").attr("id",t),i;return n!==null&&(i=$("<div>").addClass("panel-body"),i.append(n),r.append(i)),r}});Bridge.define("ThreejsDemo.BaseDemo",{statics:{bussy:null},camera:null,renderer:null,scene:null,controls:null,isActive:!1,demoName:null,demoCategory:null,container:null,width:800,height:800,constructor:function(n,t){this.demoName=n;this.demoCategory=t;this.container=document.createElement("div");this.container.style.width="100%";this.container.style.height="100%"},show:function(){this.isActive=!0;this.isInit()?(this.updateRenderSize(),this.requestFrame()):this.doInit()},hide:function(){this.isActive=!1},doInit:function(){ThreejsDemo.BaseDemo.bussy===null&&(ThreejsDemo.BaseDemo.bussy=new ThreejsDemo.BussyDlg);ThreejsDemo.BaseDemo.bussy.show("Loading scene: "+this.demoName);var n=Bridge.fn.bind(this,function(){this.init();ThreejsDemo.BaseDemo.bussy.hide();this.updateRenderSize();this.requestFrame()});window.setTimeout(n,500)},isInit:function(){return this.renderer!==null},init:function(){this.camera=new THREE.PerspectiveCamera(60,Bridge.Int.div(this.width,this.height),1,1e3);this.camera.position.z=500;window.addEventListener("resize",Bridge.fn.bind(this,this.onWindowResize),!1)},requestFrame:function(){this.isActive&&(this.render(),window.requestAnimationFrame(Bridge.fn.bind(this,this.requestFrame)))},render:function(){this.isActive&&(this.renderer!==null&&this.renderer.render(this.scene,this.camera),this.controls!==null&&this.controls.update())},onWindowResize:function(){this.updateRenderSize()},updateRenderSize:function(){if(this.isActive){var n=this.width,t=this.height;n!==0&&t!==0&&(this.camera.aspect=Bridge.Int.div(n,t),this.camera.updateProjectionMatrix(),this.renderer.setSize(n,t))}}});Bridge.define("ThreejsDemo.ParticleBaseDemo",{inherits:[ThreejsDemo.BaseDemo],constructor:function(n,t){ThreejsDemo.BaseDemo.prototype.$constructor.call(this,n,t)},makeCamera:function(){this.scene=new THREE.Scene;this.scene.fog=new THREE.Fog((new THREE.Color).setHex(13426943),500,1e4);this.camera=new THREE.PerspectiveCamera(30,Bridge.Int.div(this.height,this.width),1,1e4);this.camera.position.y=1e3;this.camera.position.z=1500;this.scene.add(this.camera)},makeLights:function(){var n,t;this.scene.add(new THREE.AmbientLight(6710886));n=new THREE.DirectionalLight(14674943,1.75);n.position.set(50,200,100);n.position.multiplyScalar(1.3);n.castShadow=!0;n.shadowCameraVisible=!1;n.shadowMapWidth=1024;n.shadowMapHeight=1024;t=300;n.shadowCameraLeft=-t;n.shadowCameraRight=t;n.shadowCameraTop=t;n.shadowCameraBottom=-t;n.shadowCameraFar=1e3;this.scene.add(n)},createRenderer:function(){this.renderer=new THREE.WebGLRenderer(!0);this.renderer.setSize(this.width,this.height);this.renderer.setClearColor(this.scene.fog.color);this.container.appendChild(this.renderer.domElement);this.renderer.gammaInput=!0;this.renderer.gammaOutput=!0;this.renderer.shadowMapEnabled=!0},createTrackball:function(){this.controls=new THREE.TrackballControls(this.camera,this.renderer.domElement);this.controls.rotateSpeed=4;this.controls.zoomSpeed=1.2;this.controls.panSpeed=.8;this.controls.noZoom=!1;this.controls.noPan=!1;this.controls.staticMoving=!0;this.controls.dynamicDampingFactor=.3}});Bridge.define("ThreejsDemo.geometry_demo",{inherits:[ThreejsDemo.BaseDemo],functions:null,geometryIndex:0,currentMesh:null,dropDownButton:null,constructor:function(n,t){ThreejsDemo.BaseDemo.prototype.$constructor.call(this,n,t);this.geometryIndex=0;this.currentMesh=null;this.functions=new Bridge.List$1(ThreejsDemo.GeometryFunction)()},init:function(){this.functions.add(Bridge.merge(new ThreejsDemo.GeometryFunction,{$function:Bridge.fn.bind(this,this.makeSphere),name:"Sphere"}));this.functions.add(Bridge.merge(new ThreejsDemo.GeometryFunction,{$function:Bridge.fn.bind(this,this.makeBox),name:"Box"}));this.functions.add(Bridge.merge(new ThreejsDemo.GeometryFunction,{$function:Bridge.fn.bind(this,this.makeCilinder),name:"Cilinder"}));this.makeComboBox();this.camera=new THREE.PerspectiveCamera(70,Bridge.Int.div(this.width,this.height),1,1e4);this.camera.position.z=500;this.scene=new THREE.Scene;this.createTrackballControl();this.createLights();this.createRenderer();this.showGeometry()},createTrackballControl:function(){this.controls=new THREE.TrackballControls(this.camera);this.controls.rotateSpeed=3;this.controls.zoomSpeed=1.2;this.controls.panSpeed=.8;this.controls.noZoom=!1;this.controls.noPan=!1;this.controls.staticMoving=!0;this.controls.dynamicDampingFactor=.3},createRenderer:function(){this.renderer=new THREE.WebGLRenderer(!1);this.renderer.antialias=!1;this.renderer.setClearColor("white");this.renderer.setSize(this.width,this.height);this.container.appendChild(this.renderer.domElement)},createLights:function(){this.scene.add(new THREE.AmbientLight(5263440));var n=new THREE.SpotLight(16777215,1.5);n.position.set(0,500,2e3);n.castShadow=!0;n.shadowCameraNear=200;n.shadowCameraFar=this.camera.far;n.shadowCameraFov=50;n.shadowBias=-.00022;n.shadowDarkness=.5;n.shadowMapWidth=2048;n.shadowMapHeight=2048;this.scene.add(n)},makeSphere:function(){return new THREE.SphereGeometry(100,50,50)},makeBox:function(){return new THREE.BoxGeometry(100,100,100)},makeCilinder:function(){return new THREE.CylinderGeometry(100,100,100,50,50)},showGeometry:function(){this.currentMesh!==null&&this.scene.remove(this.currentMesh);this.geometryIndex<0&&(this.geometryIndex=0);var n=this.functions.getItem(this.geometryIndex),i=n.$function(),t=new THREE.MeshLambertMaterial;t.color=(new THREE.Color).setHex(Math.random()*16777215);this.currentMesh=new THREE.Mesh(i,t);this.scene.add(this.currentMesh);this.dropDownButton.text(n.name);this.render()},makeComboBox:function(){var n,t=$("<div>").addClass("dropdown").attr("id","dropDown"),r;for(this.dropDownButton=$("<button>").addClass("btn btn-primary dropdown-toggle").attr("id","dropDownButton").attr("type","button").attr("data-toggle","dropdown").html("Choose geometry ").appendTo(t),$("<span>").addClass("caret").appendTo(this.dropDownButton),r=$("<ul>").addClass("dropdown-menu").attr("role","menu").attr("aria-labelledby","dropDownButton").appendTo(t),n=Bridge.getEnumerator(this.functions);n.moveNext();){var u=n.getCurrent(),i=$("<li>").attr("role","presentation"),f=$("<a>").attr("tabindex","-1").attr("tabindex","-1").attr("href","#").html(u.name).appendTo(i);i.appendTo(r);i.click(u,Bridge.fn.bind(this,this.listClick))}t.appendTo(this.container)},listClick:function(n){var t=Bridge.as(n.data,ThreejsDemo.GeometryFunction);this.geometryIndex=this.functions.indexOf(t);this.showGeometry()}});Bridge.define("ThreejsDemo.misc_controls_transform",{inherits:[ThreejsDemo.BaseDemo],ctrl:null,constructor:function(n,t){ThreejsDemo.BaseDemo.prototype.$constructor.call(this,n,t)},init:function(){var f=Bridge.merge(document.createElement("div"),{innerHTML:"\r\n                W = translate |\r\n                E = rotate | \r\n                + = increase size |  \r\n               - = decrise seize <br />\r\n               Press Q to toggle world/local space"}),t,n,u,i,r;this.container.appendChild(f);this.renderer=new THREE.WebGLRenderer;this.renderer.setSize(this.width,this.height);this.renderer.sortObjects=!1;this.container.appendChild(this.renderer.domElement);this.camera=new THREE.PerspectiveCamera(70,Bridge.Int.div(this.width,this.height),1,3e3);this.camera.position.set(1e3,500,1e3);this.camera.lookAt(new THREE.Vector3(0,200,0));this.scene=new THREE.Scene;this.scene.add(new THREE.GridHelper(500,100));t=new THREE.DirectionalLight(16777215,2);t.position.set(1,1,1);this.scene.add(t);n=THREE.ImageUtils.loadTexture("textures/crate.gif",THREE.MappingMode.uVMapping,Bridge.fn.bind(ThreejsDemo.BaseDemo.prototype,ThreejsDemo.BaseDemo.prototype.render));n.mapping=THREE.MappingMode.uVMapping;n.anisotropy=this.renderer.getMaxAnisotropy();u=new THREE.BoxGeometry(200,200,200);i=new THREE.MeshLambertMaterial;i.map=n;this.controls=new THREE.TransformControls(this.camera,this.renderer.domElement);this.controls.addEventListener("change",Bridge.fn.bind(ThreejsDemo.BaseDemo.prototype,ThreejsDemo.BaseDemo.prototype.render));r=new THREE.Mesh(u,i);this.scene.add(r);this.controls.attach(r);this.scene.add(this.controls);this.createTrackball();window.addEventListener("keydown",Bridge.fn.bind(this,this.switchCase),!1)},render:function(){ThreejsDemo.BaseDemo.prototype.render.call(this);this.ctrl.update()},createTrackball:function(){this.ctrl=new THREE.TrackballControls(this.camera,this.renderer.domElement);this.ctrl.rotateSpeed=4;this.ctrl.zoomSpeed=1.2;this.ctrl.panSpeed=.8;this.ctrl.noZoom=!1;this.ctrl.noPan=!1;this.ctrl.staticMoving=!0;this.ctrl.dynamicDampingFactor=.3},switchCase:function(n){var t=n;switch(t.keyCode){case 81:this.controls.setSpace(this.controls.space==="local"?"world":"local");break;case 87:this.controls.setMode("translate");break;case 69:this.controls.setMode("rotate");break;case 82:this.controls.setMode("scale");break;case 187:case 107:this.controls.setSize(this.controls.size+.1);break;case 189:case 10:this.controls.setSize(Math.max(this.controls.size-.1,.1))}}});Bridge.define("ThreejsDemo.misc_controls_trackball",{inherits:[ThreejsDemo.BaseDemo],constructor:function(n,t){ThreejsDemo.BaseDemo.prototype.$constructor.call(this,n,t)},init:function(){var u,f,i,r,t,n;for(ThreejsDemo.BaseDemo.prototype.init.call(this),this.controls=new THREE.TrackballControls(this.camera,this.container),this.controls.rotateSpeed=3,this.controls.zoomSpeed=1.2,this.controls.panSpeed=.8,this.controls.noZoom=!1,this.controls.noPan=!1,this.controls.staticMoving=!0,this.controls.dynamicDampingFactor=.3,this.controls.keys=[65,83,68],this.scene=new THREE.Scene,u=new THREE.FogExp2(13421772,.002),this.scene.fog=u,f=new THREE.CylinderGeometry(0,10,30,4,1),i=new THREE.MeshPhongMaterial,i.color=(new THREE.Color).setHex(16777215),i.shading=THREE.ShadingType.flatShading,r=0;r<500;r++)t=new THREE.Mesh(f,i),t.position.x=(Math.random()-.5)*1e3,t.position.y=(Math.random()-.5)*1e3,t.position.z=(Math.random()-.5)*1e3,t.updateMatrix(),t.matrixAutoUpdate=!1,this.scene.add(t);n=new THREE.DirectionalLight;n.color=(new THREE.Color).setHex(16777215);n.position.set(1,1,1);this.scene.add(n);n=new THREE.DirectionalLight;n.color=(new THREE.Color).setHex(8840);n.position.set(-1,-1,-1);this.scene.add(n);n=new THREE.AmbientLight(2236962);n.color=(new THREE.Color).setHex(2236962);this.scene.add(n);this.renderer=new THREE.WebGLRenderer(!1);this.renderer.antialias=!1;this.renderer.setClearColor(this.scene.fog.color);this.renderer.setSize(this.width,this.height);this.container.appendChild(this.renderer.domElement)}});Bridge.define("ThreejsDemo.webgl_interactive_draggablecubes",{inherits:[ThreejsDemo.BaseDemo],mouse:null,raycaster:null,plane:null,offset:null,intersected:null,selected:null,allObjects:null,constructor:function(n,t){ThreejsDemo.BaseDemo.prototype.$constructor.call(this,n,t)},init:function(){this.mouse=new THREE.Vector2;this.raycaster=new THREE.Raycaster;this.offset=new THREE.Vector3;this.allObjects=[];this.createCamera();this.createScene();this.createBoxes();this.plane=new THREE.Mesh(new THREE.PlaneBufferGeometry(2e3,2e3,8,8),Bridge.merge(new THREE.MeshBasicMaterial,{color:0,opacity:.25,transparent:!0}));this.plane.visible=!1;this.scene.add(this.plane);this.createRenderer();this.renderer.domElement.onmousemove=Bridge.fn.bind(this,this.onDocumentMouseMove);this.renderer.domElement.onmousedown=Bridge.fn.bind(this,this.onDocumentMouseDown);this.renderer.domElement.onmouseup=Bridge.fn.bind(this,this.onDocumentMouseUp);this.createTrackball()},createRenderer:function(){this.renderer=Bridge.merge(new THREE.WebGLRenderer,{antialias:!0});this.renderer.setClearColor(15790320);this.renderer.sortObjects=!1;this.renderer.shadowMapEnabled=!0;this.renderer.shadowMapType=THREE.MapType.basicShadowMap;this.container.appendChild(this.renderer.domElement)},createBoxes:function(){for(var n,i=new THREE.BoxGeometry(40,40,40),t=0;t<200;t++)n=this.makeMesh(i),this.scene.add(n),this.allObjects.push(n)},createScene:function(){this.scene=new THREE.Scene;this.scene.add(new THREE.AmbientLight(5263440));var n=new THREE.SpotLight(16777215,1.5);n.position.set(0,500,2e3);n.castShadow=!0;n.shadowCameraNear=200;n.shadowCameraFar=this.camera.far;n.shadowCameraFov=50;n.shadowBias=-.00022;n.shadowDarkness=.5;n.shadowMapWidth=2048;n.shadowMapHeight=2048;this.scene.add(n)},createTrackball:function(){this.controls=new THREE.TrackballControls(this.camera,this.renderer.domElement);this.controls.rotateSpeed=4;this.controls.zoomSpeed=1.2;this.controls.panSpeed=.8;this.controls.noZoom=!1;this.controls.noPan=!1;this.controls.staticMoving=!0;this.controls.dynamicDampingFactor=.3},createCamera:function(){this.camera=new THREE.PerspectiveCamera(70,Bridge.Int.div(this.width,this.height),1,1e4);this.camera.position.z=1e3},makeMesh:function(n){var i=null,t;return i=new THREE.MeshLambertMaterial,i.color=new THREE.Color,i.color.setHex(Math.random()*16777215),t=new THREE.Mesh(n,i),t.position.x=Math.random()*1e3-500,t.position.y=Math.random()*600-300,t.position.z=Math.random()*800-400,t.rotation.x=Math.random()*2*Math.PI,t.rotation.y=Math.random()*2*Math.PI,t.rotation.z=Math.random()*2*Math.PI,t.scale.x=Math.random()*2+1,t.scale.y=Math.random()*2+1,t.scale.z=Math.random()*2+1,t.castShadow=!0,t.receiveShadow=!0,t},onDocumentMouseUp:function(n){if(this.isActive){var t=n;t.preventDefault();this.controls.enabled=!0;this.intersected!==null&&(this.plane.position.copy(this.intersected.position),this.selected=null);this.container.style.cursor="auto"}},onDocumentMouseDown:function(n){var u,i,r;if(this.isActive){u=n;u.preventDefault();var e=new THREE.Vector3(this.mouse.x,this.mouse.y,.5).unproject(this.camera),f=new THREE.Raycaster(this.camera.position,e.sub(this.camera.position).normalize()),t=f.intersectObjects(this.allObjects);t.length>0&&(i=t[0],r=Bridge.as(i.object,THREE.Mesh),r!==null&&(this.controls.enabled=!1,this.selected=r,t=f.intersectObject(this.plane),this.offset.copy(i.point).sub(this.plane.position),this.container.style.cursor="move"))}},onDocumentMouseMove:function(n){var r,t,u,i;if(this.isActive){if(r=n,r.preventDefault(),this.setMousePos(r),this.raycaster.setFromCamera(this.mouse,this.camera),this.selected!==null){t=this.raycaster.intersectObject(this.plane);this.selected.position.copy(t[0].point.sub(this.offset));return}t=this.raycaster.intersectObjects(this.allObjects);t.length>0?(u=t[0],i=Bridge.as(u.object,THREE.Mesh),i!==null&&i!==this.intersected&&(this.intersected=i,this.plane.position.copy(this.intersected.position),this.plane.lookAt(this.camera.position)),this.container.style.cursor="pointer"):(this.intersected=null,this.container.style.cursor="auto")}},setMousePos:function(n){var t=this.renderer.domElement.getBoundingClientRect();this.mouse.x=(n.clientX-t.left)/Bridge.cast(this.width,Number)*2-1;this.mouse.y=-((n.clientY-t.top)/Bridge.cast(this.height,Number))*2+1}});Bridge.define("ThreejsDemo.demo_shadow",{inherits:[ThreejsDemo.BaseDemo],constructor:function(n,t){ThreejsDemo.BaseDemo.prototype.$constructor.call(this,n,t)},init:function(){var o,u,n,s,f,t,h,e,i,r;this.scene=new THREE.Scene;this.camera=new THREE.PerspectiveCamera(45,Bridge.Int.div(this.width,this.height),.1,1e3);this.renderer=new THREE.WebGLRenderer;this.renderer.setClearColor(new THREE.Color(15658734));this.renderer.setSize(this.width,this.height);this.renderer.shadowMapEnabled=!0;this.container.appendChild(this.renderer.domElement);o=new THREE.PlaneGeometry(60,20);u=new THREE.MeshLambertMaterial;u.color=new THREE.Color(.9,.9,.9);n=new THREE.Mesh(o,u);n.receiveShadow=!0;n.rotation.x=-.5*Math.PI;n.position.x=15;n.position.y=0;n.position.z=0;this.scene.add(n);s=new THREE.CubeGeometry(4,4,4);f=new THREE.MeshLambertMaterial;f.color=new THREE.Color(1,0,0);t=new THREE.Mesh(s,f);t.castShadow=!0;t.position.x=-4;t.position.y=3;t.position.z=0;this.scene.add(t);h=new THREE.SphereGeometry(4,20,20);e=new THREE.MeshLambertMaterial;e.color=new THREE.Color(0,0,1);i=new THREE.Mesh(h,e);i.position.x=20;i.position.y=4;i.position.z=2;i.castShadow=!0;this.scene.add(i);this.camera.position.x=-30;this.camera.position.y=40;this.camera.position.z=30;this.camera.lookAt(this.scene.position);r=new THREE.SpotLight;r.color=new THREE.Color(1,1,1);r.position.set(-40,60,-10);r.castShadow=!0;this.scene.add(r);this.controls=new THREE.TrackballControls(this.camera);this.controls.rotateSpeed=10;this.controls.zoomSpeed=1.2;this.controls.panSpeed=.8;this.controls.noZoom=!1;this.controls.noPan=!1;this.controls.staticMoving=!0;this.controls.dynamicDampingFactor=.3;this.controls.keys=[65,83,68]}});Bridge.define("ThreejsDemo.demo_cloths",{inherits:[ThreejsDemo.ParticleBaseDemo],cloth:null,constructor:function(n,t){ThreejsDemo.ParticleBaseDemo.prototype.$constructor.call(this,n,t)},init:function(){ThreejsDemo.ParticleBaseDemo.prototype.init.call(this);this.cloth=Particles.Cloth.create();this.makeCamera();this.makeLights();var n=new THREE.TextureLoader;n.load("./bridge.gif",Bridge.fn.bind(this,this.makeClothMesh));this.scene.add(this.cloth.ballConstrain.mesh);this.scene.add(this.cloth.boxConstrain.mesh);n=new THREE.TextureLoader;n.load("./threejs/textures/terrain/backgrounddetailed6.jpg",Bridge.fn.bind(this,this.makeGroundPlane));this.makePortal();this.createRenderer();this.createTrackball()},makePortal:function(){var r=new THREE.BoxGeometry(5,375,5),t=new THREE.MeshPhongMaterial,n,i;t.color=(new THREE.Color).setHex(16777215);t.specular=(new THREE.Color).setHex(1118481);t.shininess=100;n=new THREE.Mesh(r,t);n.position.x=-125;n.position.y=-62;n.receiveShadow=!0;n.castShadow=!0;this.scene.add(n);n=new THREE.Mesh(r,t);n.position.x=125;n.position.y=-62;n.receiveShadow=!0;n.castShadow=!0;this.scene.add(n);n=new THREE.Mesh(new THREE.BoxGeometry(255,5,5),t);n.position.y=125;n.position.x=0;n.receiveShadow=!0;n.castShadow=!0;this.scene.add(n);i=new THREE.BoxGeometry(10,10,10);n=new THREE.Mesh(i,t);n.position.y=-250;n.position.x=125;n.receiveShadow=!0;n.castShadow=!0;this.scene.add(n);n=new THREE.Mesh(i,t);n.position.y=-250;n.position.x=-125;n.receiveShadow=!0;n.castShadow=!0;this.scene.add(n)},makeClothMesh:function(n){var i=n,t,u,r,o,f,e;i.wrapS=THREE.WrapType.mirroredRepeatWrapping;i.wrapT=THREE.WrapType.repeatWrapping;i.repeat.y=-1;i.anisotropy=16;t=new THREE.MeshPhongMaterial;t.specular=(new THREE.Color).setHex(197379);t.map=i;t.side=THREE.SideType.doubleSide;t.alphaTest=.5;t.wireframe=!1;t.wireframeLinewidth=2;u=new THREE.Mesh(this.cloth.geometry,t);u.position.set(0,0,0);u.castShadow=!0;r=null;o={texture:{type:"t",value:i}};r=new THREE.ShaderMaterial;r.side=THREE.SideType.doubleSide;f=ThreejsDemo.Shaders.vertex;e=ThreejsDemo.Shaders.fragment;r.vertexShader=f;r.fragmentShader=e;u.customDepthMaterial=r;this.scene.add(u)},makeGroundPlane:function(n){var t=n,i,r;t.wrapS=THREE.WrapType.repeatWrapping;t.wrapT=THREE.WrapType.repeatWrapping;t.repeat.set(25,25);t.anisotropy=16;i=new THREE.MeshPhongMaterial;i.color=(new THREE.Color).setHex(16777215);i.specular=(new THREE.Color).setHex(1118481);i.map=t;r=new THREE.Mesh(new THREE.PlaneBufferGeometry(2e4,2e4),i);r.position.y=-250;r.rotation.x=-Math.PI/2;r.receiveShadow=!0;this.scene.add(r)},requestFrame:function(){var n=(new Date).getTime()*1e4;this.cloth.simulate(n);ThreejsDemo.ParticleBaseDemo.prototype.requestFrame.call(this)}});Bridge.define("ThreejsDemo.demo_carpet",{inherits:[ThreejsDemo.ParticleBaseDemo],carpet:null,constructor:function(n,t){ThreejsDemo.ParticleBaseDemo.prototype.$constructor.call(this,n,t)},init:function(){var n,t,i;for(ThreejsDemo.ParticleBaseDemo.prototype.init.call(this),this.carpet=new Particles.Carpet,this.makeCamera(),this.makeLights(),t=new THREE.TextureLoader,t.load("./bridge.gif",Bridge.fn.bind(this,this.makeCarpetMesh)),this.createRenderer(),this.createTrackball(),n=Bridge.getEnumerator(this.carpet.objectconstraines.items);n.moveNext();)i=n.getCurrent(),this.scene.add(i.mesh);this.camera.lookAt(this.scene.position)},requestFrame:function(){var n=(new Date).getTime()*1e4;this.carpet.simulate(n);ThreejsDemo.ParticleBaseDemo.prototype.requestFrame.call(this)},makeCarpetMesh:function(n){var t=n,i,r,u,f;t.wrapS=THREE.WrapType.mirroredRepeatWrapping;t.wrapT=THREE.WrapType.repeatWrapping;t.repeat.y=-1;t.anisotropy=16;i=new THREE.MeshPhongMaterial;i.specular=(new THREE.Color).setHex(197379);i.map=t;i.side=THREE.SideType.doubleSide;i.alphaTest=.5;r=new THREE.Mesh(this.carpet.geometry,i);r.position.set(0,0,0);r.castShadow=!0;u=null;f={texture:{type:"t",value:t}};u=new THREE.ShaderMaterial;u.side=THREE.SideType.doubleSide;r.customDepthMaterial=u;this.scene.add(r)}});Bridge.define("ThreejsDemo.canvas_ascii_effect",{inherits:[ThreejsDemo.BaseDemo],effect:null,sphere:null,config:{init:function(){this.startTime=(new Date).getTime()}},constructor:function(n,t){ThreejsDemo.BaseDemo.prototype.$constructor.call(this,n,t)},init:function(){var t=this.width,i=this.height,e=document.createElement("div"),r,u,f,n;e.innerHTML="Drag to change the view";this.container.appendChild(e);this.camera=new THREE.PerspectiveCamera(70,Bridge.Int.div(t,i),1,1e3);this.camera.position.y=150;this.camera.position.z=500;this.controls=new THREE.TrackballControls(this.camera);this.scene=new THREE.Scene;r=new THREE.PointLight(16777215);r.position.set(500,500,500);this.scene.add(r);u=new THREE.MeshLambertMaterial;u.shading=THREE.ShadingType.flatShading;this.sphere=new THREE.Mesh(new THREE.SphereGeometry(200,20,10),u);this.scene.add(this.sphere);f=new THREE.MeshBasicMaterial;f.color=14737632;n=new THREE.Mesh(new THREE.PlaneBufferGeometry(400,400),f);n.position.y=-200;n.rotation.x=-Math.PI/2;this.scene.add(n);this.renderer=new THREE.CanvasRenderer;this.renderer.setClearColor(15790320);this.renderer.setSize(t,i);this.effect=new THREE.AsciiEffect(this.renderer," +-Hgxyz");this.effect.setSize(t,i);this.container.appendChild(this.effect.domElement)},render:function(){if(this.isActive){ThreejsDemo.BaseDemo.prototype.render.call(this);var n=(new Date).getTime()-this.startTime;this.sphere.position.y=Math.abs(Math.sin(n*.002))*150;this.sphere.rotation.x=n*.0003;this.sphere.rotation.z=n*.0002;this.effect.render(this.scene,this.camera)}}});Bridge.define("ThreejsDemo.DemoLauncher",{statics:{demos:null,activeDemo:null,demoContainer:null,launch:function(){ThreejsDemo.DemoLauncher.activeDemo=null;ThreejsDemo.DemoLauncher.demos=new Bridge.Dictionary$2(String,Bridge.List$1(ThreejsDemo.BaseDemo))();ThreejsDemo.DemoLauncher.addDemo(new ThreejsDemo.webgl_interactive_draggablecubes("draggablecubes","Interactive"));ThreejsDemo.DemoLauncher.addDemo(new ThreejsDemo.misc_controls_trackball("trackball","Interactive"));ThreejsDemo.DemoLauncher.addDemo(new ThreejsDemo.misc_controls_transform("transform","Interactive"));ThreejsDemo.DemoLauncher.addDemo(new ThreejsDemo.demo_shadow("Shadow","Geometry"));ThreejsDemo.DemoLauncher.addDemo(new ThreejsDemo.geometry_demo("GeometryDemo","Geometry"));ThreejsDemo.DemoLauncher.addDemo(new ThreejsDemo.canvas_ascii_effect("ascii_effect","Effects"));ThreejsDemo.DemoLauncher.addDemo(new ThreejsDemo.demo_cloths("demo_cloths","Effects"));ThreejsDemo.DemoLauncher.addDemo(new ThreejsDemo.demo_carpet("demo_carpet","Effects"));ThreejsDemo.DemoLauncher.makeList()},makeList:function(){var t,i,n=$("<div>").addClass("row"),o=$("<div>").addClass("col-sm-3").appendTo(n),s=$("<div>").addClass("col-sm-9").appendTo(n),r,u,f,e;for(n.get(0).style.padding="20px",r=ThreejsDemo.AccordionPanel.make("Sharp THREEjs","(jus a try out :)","myID","panel_default"),t=Bridge.getEnumerator(ThreejsDemo.DemoLauncher.demos);t.moveNext();){for(u=t.getCurrent(),f=new ThreejsDemo.ListMaker,i=Bridge.getEnumerator(u.value);i.moveNext();)e=i.getCurrent(),f.addListItem(e.demoName,ThreejsDemo.DemoLauncher.clickDemo,e);r.addPanel(u.key,f.list)}o.append(r.mainContainer);n.appendTo(document.body);ThreejsDemo.DemoLauncher.demoContainer=s.get(0)},addDemo:function(n){ThreejsDemo.DemoLauncher.demos.containsKey(n.demoCategory)||ThreejsDemo.DemoLauncher.demos.add(n.demoCategory,new Bridge.List$1(ThreejsDemo.BaseDemo)());ThreejsDemo.DemoLauncher.demos.get(n.demoCategory).add(n)},clickDemo:function(n){var t=Bridge.as(n.data,ThreejsDemo.BaseDemo),i;t!==ThreejsDemo.DemoLauncher.activeDemo&&(ThreejsDemo.DemoLauncher.activeDemo!==null&&(ThreejsDemo.DemoLauncher.activeDemo.hide(),ThreejsDemo.DemoLauncher.demoContainer.removeChild(ThreejsDemo.DemoLauncher.activeDemo.container),ThreejsDemo.DemoLauncher.activeDemo=null),ThreejsDemo.DemoLauncher.activeDemo=t,ThreejsDemo.DemoLauncher.demoContainer.appendChild(ThreejsDemo.DemoLauncher.activeDemo.container),i=function(){ThreejsDemo.DemoLauncher.activeDemo.show()},window.setTimeout(i,500))}}});Bridge.define("ThreejsDemo.App",{statics:{config:{init:function(){Bridge.ready(this.main)}},main:function(){ThreejsDemo.DemoLauncher.launch()}}});Bridge.init();